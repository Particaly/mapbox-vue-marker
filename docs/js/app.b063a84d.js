(function(e){function r(r){for(var t,o,c=r[0],i=r[1],s=r[2],u=0,p=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);m&&m(r);while(p.length)p.shift()();return l.push.apply(l,s||[]),n()}function n(){for(var e,r=0;r<l.length;r++){for(var n=l[r],t=!0,c=1;c<n.length;c++){var i=n[c];0!==a[i]&&(t=!1)}t&&(l.splice(r--,1),e=o(o.s=n[0]))}return e}var t={},a={app:0},l=[];function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,r,n){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)o.d(n,t,function(r){return e[r]}.bind(null,t));return n},o.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=r,c=c.slice();for(var s=0;s<c.length;s++)r(c[s]);var m=i;l.push([0,"chunk-vendors"]),n()})({0:function(e,r,n){e.exports=n("56d7")},"0c12":function(e,r,n){"use strict";var t=n("0f29"),a=n.n(t);a.a},"0f29":function(e,r,n){},"14ff":function(e,r,n){"use strict";var t=n("71ff"),a=n.n(t);a.a},"35a1":function(e,r,n){},"56d7":function(e,r,n){"use strict";n.r(r);n("cadf"),n("551c"),n("f751"),n("097d");var t=n("2b0e"),a=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],o=(n("5c0b"),n("2877")),c={},i=Object(o["a"])(c,a,l,!1,null,null,null),s=i.exports,m=n("8c4f"),u=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"home"},[n("AllHeader"),n("Left"),n("Right")],1)},p=[],v=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},d=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"allheader"},[n("div",{staticClass:"title"},[e._v("Mapbox-Vue-Marker")])])}],f={name:"allheader"},_=f,k=(n("adae"),Object(o["a"])(_,v,d,!1,null,"3d9dd40e",null)),h=k.exports,b=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"left"},[n("div",{staticClass:"list-holder"},[n("Menu",{staticClass:"menubox",attrs:{"active-name":"0-0","open-names":[0],width:"auto",accordion:!0},on:{"on-select":e.changeRoute}},e._l(e.list,(function(r,t){return n("div",[r.children?n("Submenu",{key:"far"+t,attrs:{name:t}},[n("template",{slot:"title"},[e._v("\n                        "+e._s(r.name)+"\n                    ")]),e._l(r.children,(function(r,a){return n("MenuItem",{key:"far"+t+"child"+a,attrs:{name:t+"-"+a}},[e._v(e._s(r.name))])}))],2):e._e(),r.children?e._e():n("MenuItem",{key:"far"+t,attrs:{name:t+"-0"}},[e._v(e._s(r.name))])],1)})),0)],1)])},x=[],$=(n("28a5"),n("768b")),g=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},M=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("安装")]),n("pre",[e._v("        "),n("code",[e._v("npm install mapbox-vue-marker --save")]),e._v("\n    ")]),n("p",[e._v("目前仅支持通过 npm 安装")]),n("p",[e._v("注意！本插件需要同时使用vue和mapboxgl")]),n("p",[e._v("国内建议使用 cnpm 进行安装")]),n("pre",[e._v("        "),n("code",[e._v("cnpm install mapbox-vue-marker --save")]),e._v("\n    ")]),n("p",[e._v(" ")])])}],y={name:"doc-install"},O=y,j=Object(o["a"])(O,g,M,!1,null,"e5f3ac68",null),E=j.exports,w=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("介绍")]),n("p",[e._v("最初的灵感来源于，能否实现动态创建一个 vue 组件，并添加到页面上显示出来。")]),n("p",[e._v("后来开发地图场景，需要使用 mapbox 的 marker 做地图扎点，而 mapbox 的扎点实际使用的是 dom ，如此一来便萌生了能否使用 vue 来做扎点的想法。")]),n("p",[e._v("在经历几个版本的迭代后，迎来了 mapbox-vue-marker 的诞生！")]),n("p",[e._v("使用Mapbox-Vue-Marker，你可以通过 vue 组件的方式，向地图添加扎点marker，实现完全由数据驱动的UI逻辑")]),n("p",[e._v("工欲善其事必先利其器，方能事半功倍！")])])}],B={name:"doc-introduce"},T=B,S=Object(o["a"])(T,w,C,!1,null,"04e4f92a",null),V=S.exports,A=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},P=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("注册组件")]),n("p",[e._v("通过 npm 安装之后，需要在 main.js 注册该插件")]),n("pre",[n("code",[e._v("import store from './store'\nimport mapboxgl from 'mapbox-gl'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport mapboxvuemarker from 'mapbox-vue-marker'\n\nlet plugOptions = {\n  mapboxgl,router,store,\n  // 可通过rename修改默认的方法名\n  // rename:{\n  //   '$addMarker':'addMK',\n  //   '$removeMarker':'delMk',\n  //   '$makeMarker':'makeMK'\n  // }\n}\n\nVue.use(mapboxvuemarker,plugOptions)\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n")])]),n("p",[e._v("通过 Vue 提供的use方法注册该组件，传入插件对象和配置对象")]),n("p",[e._v("配置对象的参数如下")]),n("pre",[n("code",[e._v("mapboxgl,\t//mapboxgl对象（必须）\nrouter,\t\t//vue的router（可选）\nstore,\t\t//vuex对象（可选）\n/*\n* 插件会提供三个全局方法，三个方法有默认的方法名\n* rename对象的作用是修改默认的方法名\n*/\nrename:{\n    '$addMarker':'addMK',\n    '$removeMarker':'delMk',\n    '$makeMarker':'makeMK'\n}\n")])]),n("p",[e._v("到此插件的配置就完成了！")])])}],K={name:"doc-register"},R=K,I=Object(o["a"])(R,A,P,!1,null,"3de238ce",null),z=I.exports,q=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},H=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("创建marker")]),n("p",[e._v("在配置好环境以后，我们正式开始创建marker，以下是一个创建marker的小例子\n            首先我们创建一个基本的 vue 组件，假设它的名字叫做 vuemarker")]),n("pre",[n("code",{staticClass:"language-vue",attrs:{lang:"vue"}},[e._v('<template>\n    <div class="vuemarker">V</div>\n</template>\n\n<script>\n    export default {\n        name: "vuemarker",\n    }\n<\/script>\n')])]),n("p",[e._v("可以看到，完全只是一个普通的 vue 对象，现在我们把这个对象导出到需要进行扎点的逻辑的组件中")]),n("pre",[n("code",[e._v("mapboxgl.accessToken = 'token';\nvar map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/streets-v11',\n    center: [-74.50, 40],\n    zoom: 9\n});\nmarker = this.$makeMarker({\n    lnglat:map.getCenter(),\n    component:vuemarker,\n});\n")])]),n("p",[e._v("上述代码创建了一个最基本的mapbox地图，然后通过插件的全局方法 $makeMarker 方法创建了一个marker对象，并赋值给 this.marker ")]),n("p",[e._v("构建marker的方法完全封装在插件内部，对外之暴露入口方法，一个最基本的marker对象仅需要传入经纬度和 vue 组件即可完成")]),n("p",[e._v("$makeMarker的详细配置参数有：")]),n("pre",[n("code",[e._v("options = {\n    lnglat,     //marker在地图上的经纬度（必须）\n    component,  //组成marker的 vue 组件\n    anchor,     //marker的中心点，详情见mapbox官网介绍，默认为bottom\n    props,      //vue组件接收的参数对象，默认为空对象\n    draggable,  //marker是否可拖动，默认为false\n    zIndex,     //扎点的层级，默认为空\n}\n")])])])}],J={name:"doc-makemarker"},L=J,D=Object(o["a"])(L,q,H,!1,null,"07561ec2",null),N=D.exports,U=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("添加marker到地图")]),n("p",[e._v("通过$makeMarker方法创建的marker不会自动添加到地图")]),n("p",[e._v("此时还需要调用$addMarker方法来添加marker到地图")]),n("pre",[n("code",[e._v("this.$addMarker(marker,map)\n")])]),n("p",[e._v("$addMarker的两个参数都为必填项")]),n("p",[e._v("第一个参数可以是marker对象，也可以是包含marker的数组或对象，第二个参数为map对象")])])}],G={name:"doc-addtomap"},Q=G,W=Object(o["a"])(Q,U,F,!1,null,"e52c7cd4",null),X=W.exports,Y=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},Z=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("移除marker")]),n("p",[e._v("$removeMarker方法可以移除在地图上的marker")]),n("pre",[n("code",[e._v("this.$removeMarker(marker)\n")])]),n("p",[e._v("该方法需要一个参数，即要移除的marker，和添加的方法相同，这个参数也可以是一个包含marker的数组或对象")]),n("p",[e._v(" ")])])}],ee={name:"doc-removemarker"},re=ee,ne=Object(o["a"])(re,Y,Z,!1,null,"18f889f6",null),te=ne.exports,ae=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},le=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("方法命名")]),n("p",[e._v("插件实际的实现是在 Vue 的原型链上添加了三个基础方法，为了排除命名冲突的问题，我们提供了修改命名的方法")]),n("p",[e._v("插件在 main.js 中注册的时候，可传递一个 rename 字段，该字段的值必须是一个对象。")]),n("pre",[n("code",[e._v("let plugOptions = {\n  mapboxgl,router,store,\n  rename:{\n    '$addMarker':'addMK',\n    '$removeMarker':'delMk',\n    '$makeMarker':'makeMK'\n  }\n}\n\nVue.use(mapboxvuemarker,plugOptions)\n")])]),n("p",[e._v("上述代码可以看出，键名为要修改的方法，键值为修改的结果")])])}],oe={name:"doc-rename"},ce=oe,ie=Object(o["a"])(ce,ae,le,!1,null,"6f10a3b4",null),se=ie.exports,me=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},ue=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("数据存储")]),n("p",[e._v("在实际项目中，更多可能的是会面临多种类多数量的marker")]),n("p",[e._v("在此提供一种保存数据的想法")]),n("pre",[n("code",[e._v("\nlet markerBox = {\n        markerType:[]\n    },\n    marker = null;\nexport default {\n    name: 'home',\n    data:function(){\n        return {\n            lnglatBox:[\n                [-74.0, 40],\n                [-75.50, 40],\n                [-74.5, 40.2],\n                [-74.95, 40.2],\n                [-74.95, 40]\n            ],\n        }\n    },\n    mounted(){\n        mapboxgl.accessToken = 'token';\n        var map = new mapboxgl.Map({\n            container: 'map', // container id\n            style: 'mapbox://styles/mapbox/streets-v11',\n            center: [-74.50, 40],\n            zoom: 9\n        });\n\n        marker = this.$makeMarker({\n            lnglat:map.getCenter(),\n            component:vuemarker,\n        });\n        for(let i in this.lnglatBox){\n            let marke = this.$makeMarker({\n                lnglat:this.lnglatBox[i],\n                component:vuemarker,\n            });\n            markerBox.markerType.push(marke);\n        }\n        map.on('load',() => {\n            this.$addMarker(marker,map)\n            this.$addMarker(markerBox,map)\n            this.$removeMarker(marker)\n        })\n    },\n    beforeDestroy(){\n        markerBox = {\n            markerType:[]\n        },\n        marker = null\n    }\n}\n")])]),n("p",[e._v("将不同的marker分类存放在markerbox对象中，集中托管")]),n("p",[e._v(" ")])])}],pe={name:"doc-savedata"},ve=pe,de=Object(o["a"])(ve,me,ue,!1,null,"2a0165f6",null),fe=de.exports,_e=function(){var e=this,r=e.$createElement;e._self._c;return e._m(0)},ke=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"titles"},[n("h2",[e._v("行为分析")]),n("ol",[n("li",[e._v("现行的版本中，您可以直接在 vue 组件中获取到正确的 router 和 vuex")]),n("li",[e._v("$addMarker 和 $removeMarker 仅对与通过 $makeMarker 方法构建的marker生效")]),n("li",[e._v("$makeMarker 构造完毕后，会立刻执行 vue 组件的 mounted 方法，并且将一直处于挂载状态")]),n("li",[e._v("我们默认向 vue 组件提供了两个 props ，分别是 marker 和 parent 对象，parent 代表调用构造 marker 方法的 vue 实例")]),n("li",[e._v("我们默认托管了 marker 的层级关系，但是这个层级并不是固定的，它在每次拖动地图时，都会进行计算得出结果，并设置为对应的层级，您可以在构建 marker 时传入 zIndex 来设置为固定层级")]),n("li",[e._v("考虑到业务中的逻辑，我们提供了 $addMarker 和 $removeMarker 的回调方法，您可以在 vue 组件的 methods 中提供 onAdd 和 onRemove 方法，它们将作为回调方法自动调用")]),n("li",[e._v("mapbox 的 marker 也具有默认行为，当您调用 $addMarker 的时候，它将首先调用一次 remove方法，您需要注意调用回调时，可能产生不可预知的错误")]),n("li",[e._v("千万不要将 markerBox 放在 data 中，这会使 vue 向 marker 添加无用的getter和setter")])]),n("p",[e._v(" ")])])}],he={name:"doc-react"},be=he,xe=Object(o["a"])(be,_e,ke,!1,null,"6daa566e",null),$e=xe.exports,ge={name:"left",data:function(){return{list:[{name:"安装",children:[{name:"NPM",article:E}]},{name:"介绍",article:V},{name:"实战教程",children:[{name:"注册插件",article:z},{name:"创建marker",article:N},{name:"添加到地图",article:X},{name:"移除marker",article:te}]},{name:"方法命名",article:se},{name:"注意事项",children:[{name:"数据存储",article:fe},{name:"行为分析",article:$e}]}]}},methods:{changeRoute:function(e){var r,n=e.split("-"),t=Object($["a"])(n,2),a=t[0],l=t[1],o=this.list[a];r=o.children?o.children[l]:o,this.bus.$emit("changeArticle",r)}}},Me=ge,ye=(n("9672"),Object(o["a"])(Me,b,x,!1,null,"796194e4",null)),Oe=ye.exports,je=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{ref:"right",staticClass:"right"},[n("article",{staticClass:"markdown-body"},[n(e.article,{tag:"component",attrs:{name:"props"}})],1)])},Ee=[],we=(n("ac6a"),{name:"Right",data:function(){return{article:E}},mounted:function(){var e=this,r=this.$el.querySelectorAll("pre code");r.forEach((function(e){hljs.highlightBlock(e)})),this.bus.$on("changeArticle",(function(r){e.article=r.article,e.$nextTick((function(){var r=e.$el.querySelectorAll("pre code");r.forEach((function(e){hljs.highlightBlock(e)})),e.$refs.right.scroll(0,0)}))}))}}),Ce=we,Be=(n("14ff"),Object(o["a"])(Ce,je,Ee,!1,null,"309b08ea",null)),Te=Be.exports,Se={name:"home",components:{AllHeader:h,Left:Oe,Right:Te}},Ve=Se,Ae=(n("0c12"),Object(o["a"])(Ve,u,p,!1,null,"7e7433dd",null)),Pe=Ae.exports;t["default"].use(m["a"]);var Ke=new m["a"]({routes:[{path:"/",name:"home",component:Pe}]}),Re=n("2f62");t["default"].use(Re["a"]);var Ie=new Re["a"].Store({state:{},mutations:{},actions:{}}),ze=(n("35a1"),n("e069")),qe=n.n(ze);n("dcad"),n("6b46");t["default"].use(qe.a),t["default"].config.productionTip=!1,t["default"].prototype.bus=new t["default"],new t["default"]({router:Ke,store:Ie,render:function(e){return e(s)}}).$mount("#app")},"5c0b":function(e,r,n){"use strict";var t=n("e332"),a=n.n(t);a.a},"71ff":function(e,r,n){},"7b58":function(e,r,n){},9672:function(e,r,n){"use strict";var t=n("7b58"),a=n.n(t);a.a},adae:function(e,r,n){"use strict";var t=n("e75f"),a=n.n(t);a.a},e332:function(e,r,n){},e75f:function(e,r,n){}});
//# sourceMappingURL=app.b063a84d.js.map